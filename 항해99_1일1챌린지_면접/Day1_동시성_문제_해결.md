# 동시성 문제 해결

### 동시성 문제란 무엇이며, 이를 해결하기 위한 기본적인 전략을 설명해주세요. 실제 운영 환경에 적용한 사례가 있다면 함께 설명해 주어도 좋습니다.

> 동시성은 다중 사용자/요청이 동시에 자원에 접근할 때 발생합니다. 락(lock), 큐(queue), 트랜잭션 격리 수준 등의 개념을 활용해 본 경험을 떠올려 보세요.

---

## 최종 답변

동시성 문제란 다중 사용자 또는 프로세스가 동시에 동일한 자원에 접근할 때 발생하는 문제입니다. 경쟁 상태로 인한 데이터의 불일치, 데드락, 가시성 문제를 발생시킬 수 있습니다.

이를 해결하기 위한 다양한 방법이 존재합니다. 락 매커니즘을 이용하여 여러 스레드의 접근을 통제하는 방법, 큐 방식으로 요청을 대기시켜 요청을 하나씩 처리하는 방법, 또는 데이터베이스 트랜잭션의 격리 수준을 설정하여 읽기/쓰기 충돌을 방지하는 방법 등이 있습니다.

실제 프로젝트에서 RabbitMQ를 활용하여 동시성 문제를 해결한 경험이 있습니다. AI 모델 서버와 백엔드 서버 간 통신에서 많은 사용자가 요청을 보낼 경우 모델 서버의 부하가 급격하게 증가하는 문제가 있었습니다. 이를 RabbitMQ의 생성자-소비자 패턴을 통해 큐 방식으로 사용자의 요청을 순차적으로 처리함으로써 경쟁 상태를 방지하여 해결했습니다. 또한, 스프링 기반 프로젝트에서는 스레드풀의 코어 스레드 수와 최대 스레드 수를 설정하여 서버가 한 번에 처리할 수 있는 요청 수를 제한하여 동시성 문제를 해결한 경험도 있습니다.

---

### 최초 답변
> 동시성 문제란 많은 유저가 동시에 접근하여 트래픽을 유발하는 것을 의미합니다. 이를 해결하기 위해서는 1차적으로 전반적인 트래픽 원인을 파악해야합니다.
원인을 파악했다면 시스템 내부에서 해결할 수 있는지 파악해 조회 시 트랜잭션 격리 설정이나 큐 처리를 통해서 하나 씩 접근하도록 설정해야합니다.
> 
> 실제 운영 환경에서는 백엔드와 AI 모델 서버를 연결할 때 유저의 요청을 한번에 처리하지 않고 RabbitMQ를 통해서 큐방식으로 유저의 요청을 처리한 경험이 있습니다.
또한 스프링 프로젝트에서는 스레드풀을 설정하여 제한된 풀을 넘어선 요청이 들어오면 큐 방식으로 요청을 대기하도록 설정하여 동시성 문제를 해결했습니다.
