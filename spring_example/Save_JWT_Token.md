[JWT](https://github.com/Lanvizu/TIL/blob/main/spring_example/JWT.md)
이전 JWT 정리 후 프로젝트에 적용하면서 Access Token과 Refresh Token을 어디에 저장할지 공부하며 정리한 글이다.

(미완)
-----

사용자 인증 - 시스템이나 애플리케이션에 접근하려는 사용자가 실제로 그 사용자가 맞는지 확인하는 과정.

session 인증 방식
서버에 상태를 저장하는 상태유지(stateful)
로그인 시 -> 서버로 요청 -> 요청 정보가 DB와 일치 확인 -> 사용자의 세션 생성 -> 해당 세션 ID를 서버나 메모리에 저장
이후 쿠키에 담아 사용자의 후속 요청마다 세션 ID 담긴 쿠키를 서버로 전송 -> 해당 세션 ID가 저장소에 존재하는지 확인

서버에서 인증을 관리하므로 클라이언트 측에서 정보 노출 위험이 적음
하지만 사용자 요청마다 DB에 접근 -> 응답 속도 저하 -> 서버 부하 원인

토큰 인증 방식
세션 방식과 달리 서버에 상태를 저장하지 않음 - 상태 비저장(Stateless)
DB에 거치지 않고 오로지 토큰을 이용한 방법 (서버를 안거치는것이 아니므)

서버를 거치지 않아 응답속도 저하 문제 해결
확장성면에서도 우수함 (이유는?)

그러나 토큰을 탈취당할 위험이 있다.
악성코드(XSS)로 탈취당하거나 클라이언트에서 서버로 전송 중 탈취
탈취당해도 서버쪽에서 탈취를 감지하기도 어렵고 강제로 해제도 불가 <-> 블랙리스트로 설정하는 방법이 있긴함 (탈취 감지 가능 시)

Access Token - 사용자의 인증과 권한을 단기 유효 토큰(문자열)
클라이언트 -> 서버  API 요청 보낼 때 해당 토큰을 헤더에 포함 + 요청 -> 액세스 토큰이 유효한지 검증

JWT의 페이로드 내부에 사용자의 정보를 통해 DB 접근 없이 확인 가능 + 서명 부분을 통해 변조 감지 가능

Access Token 저장 위치
로컬 스토리지

클라이언트 측에 데이터를 영구적으로 저장하는 방법
브라우저를 닫아도 유지되며, 클라이언트가 명시적으로 삭제하지 않는 한 유지
XSS에 취약함 (왜?) -> 악성 코드가 로컬 스토리지의 저장된 액세스 토큰을 탈취 가능 


세션 스토리지



쿠키
메모리

XSS
CSRF 정리




해당 과정을 Token을 통해 진행하기로 결정






### 참고

https://olrlobt.tistory.com/98


