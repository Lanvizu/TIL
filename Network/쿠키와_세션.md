# 쿠키(Cookie)와 세션(Session)

쿠키와 세션은 클라이언트와 서버 간의 **상태를 유지**하기 위한 기술

기본적으로 HTTP 프로토콜은 **비연결성(Connectionless)** 과 **상태 정보 유지 안 함(Stateless)** 특성을 가짐

---

## HTTP 프로토콜의 특징

### 1. 비연결성 (Connectionless)
- 클라이언트가 요청(Request)을 보내고 서버가 응답(Response)을 보낸 후 연결을 즉시 종료
- 리소스 낭비를 줄이지만, 매 요청마다 새로운 연결이 필요

### 2. 상태 정보 유지 안 함 (Stateless)
- 각 요청은 독립적으로 처리되며, 이전 요청과의 연관성이 없음
- **쿠키와 세션**은 이 문제를 해결하기 위해 사용

---

## 쿠키 (Cookie)

### **개념**

- 클라이언트(브라우저)의 **로컬 저장소**에 저장되는 키-값 형태의 작은 데이터 파일
- 이름, 값, 만료 시간, 도메인, 경로 등의 정보를 포함

### **동작 과정**

1. **서버 → 클라이언트**:  
   서버가 응답 시 `Set-Cookie` 헤더에 쿠키 정보를 포함 
   ```
   HTTP/1.1 200 OK
   Set-Cookie: user_id=doy; Expires=Wed, 21 Oct 2025 07:28:00 GMT; Path=/
   ```

2. **클라이언트**:  
   쿠키를 저장하고, 이후 요청마다 `Cookie` 헤더에 자동으로 포함 
   ```
   GET /profile HTTP/1.1
   Cookie: user_id=doy
   ```

3. **서버**:  
   쿠키를 읽어 클라이언트 상태를 식별하고 응답

### **특징**
- **저장 위치**: 클라이언트 측
- **보안**: URL에 노출되므로 보안에 취약
- **생명 주기**: 만료 시간 설정 가능 (브라우저 종료 후에도 유지 가능)
- **용량 제한**: 도메인당 약 4KB, 20개까지 저장 가능

### **사용 사례**
- 자동 로그인 유지
- 쇼핑몰 장바구니
- 사용자 선호 설정 (예: 언어, 테마)

---

## 세션 (Session)

### **개념**
- 서버 측에서 클라이언트의 상태 정보를 관리하는 기술
- 각 클라이언트에는 고유한 **세션 ID**가 부여되며, 이 ID는 쿠키를 통해 클라이언트에 저장

### **동작 과정**
1. **클라이언트 → 서버**:  
   로그인 등 상태 유지가 필요한 요청 전송

2. **서버**:  
   - 세션 저장소에 사용자 정보를 저장하고 고유한 **세션 ID**를 생성 
   - 응답 헤더에 `Set-Cookie`로 세션 ID를 전송
     ```
     HTTP/1.1 200 OK
     Set-Cookie: JSESSIONID=xslei13f; Path=/; HttpOnly
     ```

3. **클라이언트**:  
   세션 ID가 포함된 쿠키를 저장하고, 이후 요청 시 자동으로 전송

4. **서버**:  
   세션 ID를 기반으로 사용자 정보를 조회하고 요청을 처리

### **특징**
- **저장 위치**: 서버 측 (세션 저장소)
- **보안**: 세션 ID만 클라이언트에 저장되므로 비교적 안전
- **생명 주기**: 브라우저 종료 시 삭제되거나, 서버에서 만료 시간 설정 가능
- **용량 제한**: 서버 메모리/DB에 따라 유동적

### **사용 사례**
- 로그인 상태 유지
- 장바구니 정보 임시 저장
- 사용자 권한 관리

---

## 쿠키 vs 세션 비교

| 기준                | 쿠키 (Cookie)                          | 세션 (Session)                          |
|---------------------|----------------------------------------|------------------------------------------|
| **저장 위치**       | 클라이언트 브라우저                    | 서버                                     |
| **보안**            | 취약 (클라이언트에 저장)               | 강화 (세션 ID만 노출)                    |
| **생명 주기**       | 만료 시간 설정 가능                    | 브라우저 종료 시 삭제 또는 서버 설정     |
| **속도**            | 빠름 (클라이언트에서 직접 접근)        | 상대적으로 느림 (서버 조회 필요)         |
| **데이터 용량**     | 제한적 (도메인당 4KB)                  | 서버 자원에 따라 유동적                  |
| **사용 목적**       | 간단한 설정 정보 저장                  | 민감한 정보 처리 (예: 로그인)            |

---

- **쿠키**: 클라이언트에 간단한 정보를 저장하고 빠르게 접근할 때 사용
  
- **세션**: 보안이 중요한 정보를 다루거나 서버에서 상태를 관리해야 할 때 사용 
