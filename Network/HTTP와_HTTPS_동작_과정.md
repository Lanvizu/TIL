# HTTP와 HTTPS 동작 과정

HTTP와 HTTPS는 웹에서 데이터를 전송하는 데 사용되는 프로토콜로, 두 프로토콜의 동작 과정은 유사하지만 **보안 처리 방식**에서 차이가 있다.

---

## HTTP 동작 과정

HTTP는 **비연결성** 프로토콜로, 클라이언트와 서버 간의 요청(Request)과 응답(Response)을 처리하는 과정이 독립적

### **1. URL 입력**
- 사용자가 웹 브라우저에 URL 주소를 입력
- 브라우저는 입력된 도메인 이름을 DNS 서버에 요청하여 해당 서버의 IP 주소를 조회

### **2. TCP 연결**
- 클라이언트는 서버와 **3-way handshake**를 통해 TCP 연결을 설정
- TCP 연결은 데이터 전송의 신뢰성을 보장

### **3. HTTP 요청 (Request)**
- 클라이언트가 서버에 HTTP Request 메시지를 전송
- Request 메시지 구성:
  - **Request Header**: 요청 메서드(GET, POST 등), URI, HTTP 버전, 기타 헤더 정보
  - **빈 줄**: 요청 헤더와 바디를 구분
  - **Request Body**: 요청 데이터 (필요한 경우)

### **4. HTTP 응답 (Response)**
- 서버는 클라이언트의 요청에 대한 HTTP Response 메시지를 반환
- Response 메시지 구성:
  - **Response Header**: HTTP 버전, 상태 코드(200, 404 등), 기타 헤더 정보
  - **빈 줄**: 헤더와 바디를 구분
  - **Response Body**: 요청된 리소스 데이터 (예: HTML, JSON)

### **5. 연결 종료**
- 클라이언트와 서버는 데이터를 주고받은 후 **4-way handshake**를 통해 TCP 연결을 종료

---

## HTTPS 동작 과정

HTTPS는 HTTP에 **SSL/TLS 암호화**를 추가하여 데이터를 안전하게 보호하는 프로토콜

공개키 암호화 방식과 대칭키 암호화 방식을 결합하여 보안을 강화

### **1. SSL/TLS Handshake**
1. **Client Hello**:
   - 클라이언트가 서버에게 사용할 암호화 방식과 랜덤 데이터를 전송
   - 기존 세션이 있다면 세션 ID를 재활용 가능
   
2. **Server Hello**:
   - 서버가 클라이언트에게 선택된 암호화 방식과 랜덤 데이터를 반환
   - 서버는 SSL 인증서를 함께 전송하여 자신의 신원을 증명

3. **클라이언트 인증 확인**:
   - 클라이언트는 인증서를 검증하여 신뢰할 수 있는 CA(Certificate Authority)가 발급했는지 확인
   - 클라이언트는 랜덤 데이터를 조합하여 `pre-master secret`을 생성하고, 이를 서버의 공개키로 암호화하여 전달

4. **서버 인증 확인 및 대칭키 생성**:
   - 서버는 자신의 비공개키로 `pre-master secret`을 복호화하여 대칭키(Session Key)를 생성
   - 클라이언트와 서버는 동일한 대칭키를 공유

5. **Handshake 종료**:
   - 클라이언트와 서버가 대칭키를 사용해 암호화된 통신을 시작

### **2. 데이터 전송**
- 클라이언트와 서버는 대칭키(Session Key)를 사용해 데이터를 암복호화하며 안전하게 송수신

### **3. 연결 종료**
- 통신이 종료되면 세션 키를 폐기하고 연결을 종료

---

## HTTP vs HTTPS 동작 비교

| 항목               | HTTP                                      | HTTPS                                      |
|--------------------|------------------------------------------|-------------------------------------------|
| **보안 여부**      | 평문으로 데이터 전송, 암호화 없음         | SSL/TLS를 통한 데이터 암호화               |
| **TCP 연결 방식**   | 일반적인 3-way handshake                 | SSL/TLS Handshake 추가                    |
| **데이터 보호 수준**| 데이터 도청 및 변조 가능                 | 데이터 기밀성, 무결성, 인증 보장           |
| **사용 목적**       | 일반적인 웹 페이지 로드                  | 민감한 데이터 전송 (로그인, 결제 등)       |

---

- HTTP는 데이터를 평문으로 전송하며 보안이 취약하지만, HTTPS는 SSL/TLS 암호화를 통해 안전한 통신을 제공
