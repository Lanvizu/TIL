# WebSocket vs HTTP

## 🔍 개념적 차이

| 항목      | HTTP                           | WebSocket                   |
| ------- | ------------------------------ | --------------------------- |
| 방식      | 요청-응답 (Request-Response)       | 양방향 (Full-duplex)           |
| 연결      | 요청마다 연결 (비연결성, Stateless)      | 연결을 유지함 (Persistent)        |
| 데이터 흐름  | 클라이언트가 요청 → 서버가 응답             | 양방향: 서버도 임의로 메시지 전송 가능      |
| 용도      | 대부분의 웹 트래픽: API, HTML, 이미지 등   | 실시간 데이터: 채팅, 게임, 주식시세, 알림 등 |
| 프로토콜 헤더 | 헤더가 큼 (메타데이터 중심)               | 헤더가 작음 (데이터 전송 중심)          |
| 전송 효율   | 상대적으로 낮음 (매 요청마다 TCP 연결, 큰 헤더) | 높음 (한 번 연결 후 경량화된 메시지 교환)   |

> TCP/UDP 소켓은 전송 계층 (4계층)에서 사용하며 직접 소켓 연결을 사용

---

## ⚙️ 동작 구조 차이

### 🔸 HTTP

1. 클라이언트가 요청(Request)을 보냄
2. 서버가 응답(Response)을 반환
3. 요청-응답 한 번 주고 끝 → 연결 종료
4. 매번 TCP 연결 및 해제가 반복됨

> REST API, 페이지 요청, 리소스 호출 등에서 주로 사용됨.

---

### 🔸 WebSocket

1. **초기에는 HTTP로 연결 요청** (HTTP 핸드셰이크)
2. 서버가 **101 Switching Protocols**로 응답
3. 그 후, **TCP 연결은 유지**되고 양방향 통신 시작
4. 실시간 메시지를 클라이언트 ↔ 서버 간 자유롭게 주고받음

> 예: 채팅방에서 메시지가 오면 서버가 클라이언트에게 즉시 푸시

---

## 🧱 동작 계층 차이

### 📦 HTTP

* **계층:** **애플리케이션 계층 (Layer 7)**
* **하위 계층 사용:** TCP (전송 계층, Layer 4), IP (네트워크 계층, Layer 3)
* **특징:** 비연결성(stateless), 클라이언트 주도형 요청

### 📦 WebSocket

* **계층:** 역시 **애플리케이션 계층 (Layer 7)**
  → WebSocket도 HTTP 위에서 작동을 시작하지만, **별도의 프로토콜**로 동작
* **다른 점:** 연결이 지속되며 **full-duplex 통신**을 지원
  (HTTP는 기본적으로 half-duplex)

💡 요약하면 OSI 계층상 WebSocket과 HTTP는 모두 **Layer 7**에 위치하지만,
**WebSocket은 HTTP로 시작해 자체 프로토콜로 전환**된 후, 완전히 다른 방식으로 동작

---

## 🎯 정리

* HTTP는 **요청-응답 구조**로 웹의 기본을 담당하고, 간단하고 보편적인 방식
* WebSocket은 **지속적인 연결 기반 양방향 통신**을 가능하게 하여, 실시간성이 중요한 상황에 최적
* 둘은 **OSI 계층상 위치는 같지만**, **통신 흐름과 효율성, 구조**에서 큰 차이를 가짐
* 웹소켓은 **HTTP와 경쟁하는 것이 아니라 보완하는 역할**로 사용됨
