# JVM (Java Virtual Machine)

JVM은 자바 애플리케이션을 실행하기 위한 **가상 머신**

모든 플랫폼에서 동일한 바이트 코드를 실행할 수 있도록 설계

---

## 주요 기능

1. **플랫폼 독립성**  
   - `.class` 바이트 코드를 해석하여 OS/하드웨어에 상관없이 실행  
   - C/C++과 달리 재컴파일 없이 크로스 플랫폼 지원

2. **메모리 관리**  
   - 자동 메모리 할당 및 가비지 컬렉션 수행  
   - 개발자가 직접 메모리 해제를 관리할 필요 없음

3. **보안**  
   - 샌드박스 환경에서 코드 실행을 통한 시스템 자원 보호

---

## 구성 요소

### 1. 클래스 로더 (Class Loader)
- `.class` 파일을 메모리(Method Area)에 로드  
- 동적 로딩(Dynamic Loading) 지원  
- 계층적 구조(Bootstrap → Extension → Application)

### 2. 런타임 데이터 영역
| 영역               | 설명                                                                 |
|--------------------|---------------------------------------------------------------------|
| **Method Area**    | 클래스 메타데이터, 정적 변수, 상수 저장 (모든 스레드 공유)          |
| **Heap**           | 객체 인스턴스 저장 (GC 주요 대상)                                   |
| **Stack**          | 스레드별 메서드 호출 정보(로컬 변수, 연산 스택) 저장                |
| **PC Register**    | 스레드의 현재 실행 중인 명령어 주소 추적                            |
| **Native Method**  | C/C++ 등 네이티브 코드 실행 정보 저장                               |

### 3. 실행 엔진 (Execution Engine)
- **인터프리터**: 바이트 코드를 기계어로 실시간 해석  
- **JIT 컴파일러**: 빈번히 사용되는 코드 최적화 후 네이티브 코드로 변환  
- **가비지 컬렉터**: 더 이상 참조되지 않는 객체 자동 제거

---

## 메모리 관리: Stack vs Heap

| 특성                | Stack                                  | Heap                                   |
|---------------------|----------------------------------------|----------------------------------------|
| **저장 대상**       | 기본형 변수, 메서드 호출 정보          | 객체 인스턴스, 배열                    |
| **생명 주기**       | 스레드 종료 시 자동 해제               | GC에 의해 관리                         |
| **스레드 안전성**   | 스레드별 독립적 할당                   | 모든 스레드 공유                       |
| **접근 속도**       | 빠름                                   | 상대적으로 느림                        |

---

## JVM 실행 과정

1. **컴파일**: `.java` → `.class` (바이트 코드)  
2. **클래스 로딩**: Method Area에 클래스 정보 로드  
3. **실행**:  
   - 스택에 메인 스레드 생성 → 메인 메서드 호출  
   - JIT 컴파일러가 핫스팟(HotSpot) 코드 최적화
4. **가비지 컬렉션**: 주기적으로 사용하지 않는 객체 정리  

---

### 장점
- **플랫폼 호환성**: 한 번 작성된 코드로 모든 환경 실행 가능  
- **메모리 안정성**: 포인터 직접 조작 불가로 메모리 오류 최소화  
- **동적 확장**: 런타임 중 클래스 동적 로딩 지원  

### 도전 과제
- **오버헤드**: 인터프리터와 GC로 인한 성능 손실  
- **튜닝 복잡성**: 힙 크기, GC 알고리즘 선택 등 최적화 필요  

---

### 면접 답변

JVM은 Java Virtual Machine의 약자로, '자바 가상 머신'을 의미합니다.

쉽게 말해, 자바로 작성된 프로그램을 실행해주는 소프트웨어입니다.

JVM의 가장 큰 특징은 자바 프로그램이 어떤 운영체제에서든 동일하게 실행될 수 있도록 해준다는 점인데, 이 덕분에 '한 번 작성하면 어디서든 실행된다'는 자바의 장점이 실현됩니다.

JVM은 자바 컴파일러가 만든 바이트코드(.class 파일)를 읽어, 운영체제에 맞는 기계어로 변환해서 실행합니다.

이 과정에서 JVM은 메모리 관리, 가비지 컬렉션 등도 자동으로 처리해주기 때문에 개발자는 메모리 관리에 신경을 덜 쓸 수 있습니다.

정리하자면, JVM은 자바 프로그램의 실행 환경을 제공하고, 운영체제에 독립적으로 동작할 수 있게 해주며, 메모리 관리와 보안 같은 중요한 역할도 함께 수행하는 핵심적인 소프트웨어입니다.


---

## 참고

["JVM이란 무엇인가" 자바 가상 머신 이해하기](https://www.itworld.co.kr/article/3568225/jvm%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80-%EC%9E%90%EB%B0%94-%EA%B0%80%EC%83%81-%EB%A8%B8%EC%8B%A0-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0.html)

[10분 테코톡 🎅무민의 JVM Stack & Heap](https://www.youtube.com/watch?v=UzaGOXKVhwU&t=136s)

